---
import { Image } from "astro:assets";

import cardBack from "@/assets/mdx/Cardback.png";
import clubsJ from "@/assets/mdx/ClubsJ.png";
import hearts8 from "@/assets/mdx/Hearts8.png";
import spadesA from "@/assets/mdx/SpadesA.png";

interface Props {
	open: boolean;
}

const { open } = Astro.props;
---

<div class="flex w-full space-x-4">
	<div class="card-container h-68 w-60 cursor-pointer perspective-distant">
		<div class="card-flipper relative h-full w-full transition-transform duration-700 transform-3d">
			<!-- Front of card -->
			<div class="card-front absolute h-full w-full backface-hidden">
				{
					open ? (
						<Image src={spadesA} alt="Ace of Spades" />
					) : (
						<Image src={cardBack} alt="Back of a Card" />
					)
				}
			</div>

			<!-- Back of card -->
			<div class="card-back absolute h-full w-full rotate-y-180 backface-hidden">
				{
					open ? (
						<Image src={cardBack} alt="Back of a Card" />
					) : (
						<Image src={spadesA} alt="Ace of Spades" />
					)
				}
			</div>
		</div>
	</div>

	<div class="card-container h-68 w-60 cursor-pointer perspective-distant">
		<div class="card-flipper relative h-full w-full transition-transform duration-700 transform-3d">
			<!-- Front of card -->
			<div class="card-front absolute h-full w-full backface-hidden">
				{
					open ? (
						<Image src={clubsJ} alt="Jack of Clubs" />
					) : (
						<Image src={cardBack} alt="Back of a Card" />
					)
				}
			</div>

			<!-- Back of card -->
			<div class="card-back absolute h-full w-full rotate-y-180 backface-hidden">
				{
					open ? (
						<Image src={cardBack} alt="Back of a Card" />
					) : (
						<Image src={clubsJ} alt="Jack of Clubs" />
					)
				}
			</div>
		</div>
	</div>

	<div class="card-container h-68 w-60 cursor-pointer perspective-distant">
		<div class="card-flipper relative h-full w-full transition-transform duration-700 transform-3d">
			<!-- Front of card -->
			<div class="card-front absolute h-full w-full backface-hidden">
				{
					open ? (
						<Image src={hearts8} alt="Eight of Hearts" />
					) : (
						<Image src={cardBack} alt="Back of a Card" />
					)
				}
			</div>

			<!-- Back of card -->
			<div class="card-back absolute h-full w-full rotate-y-180 backface-hidden">
				{
					open ? (
						<Image src={cardBack} alt="Back of a Card" />
					) : (
						<Image src={hearts8} alt="Eight of Hearts" />
					)
				}
			</div>
		</div>
	</div>
</div>

<style>
	/* Class that will be toggled with JavaScript */
	.is-flipped {
		transform: rotateY(180deg);
	}
</style>

<script>
	// Wait for the DOM to be fully loaded
	document.addEventListener("DOMContentLoaded", () => {
		// Get all card containers on the page
		const cardContainers = document.querySelectorAll(".card-container");

		// Add click event listener to each card
		cardContainers.forEach((container) => {
			container.addEventListener("click", () => {
				// Toggle the flipped class on the card flipper element
				const flipper = container.querySelector(".card-flipper");
				flipper?.classList.toggle("is-flipped");
			});
		});
	});
</script>
